# FCVS API Sample (C#)

[Run the Code](#run-the-code) \
[Using the Class Library](#using-the-class-library) \
[Change Log](#change-log)

This solution contains a simple test application for working with the API and a class library.

The console application demonstrates using the API to make calls. It demonstrates some of the more common requests.

*The code is an example of how you might use the API and has not been tested or hardened for production use.*

The class library contains auto-generated code to work with the API. The API-specific logic was generated by using Visual Studio's `Add REST Client` option.
The class library can be copied and used in your own project. The class library is multi-targeted for .NET 4.7.2 and .NET 8.0. If you are building .NET 4.7.2+ or .NET 8.0+ projects then the library should work out of the box.
If you are targeting a different version of .NET (e.g. .NET Core 3.1 or .NET 4.6) then you will need to adjust the project and code accordingly.

*Note: Visual Studio 2022 or later is required for .NET 8.0 support. If you are using an earlier version of Visual Studio you will need to adjust the project to target an older framework.*

## Run the Code

To run this sample do the following.

1. Download the entire solution directory to your local machine.
1. Open the solution (`.sln`) in Visual Studio 2022 or higher.
1. Compile the solution.
1. Run the solution.

## Using the Class Library

To use the class library in your own code do the following.

1. Ensure either the project is part of your solution or build the project and reference the generated assembly in your solution.
1. In your application's startup code store the URL to the API (see the documentation), your client ID and client secret somewhere that your code has access to such as a configuration file or environment variable.
1. To call the API create an instance of the `FcvsClient` class and pass the configuration information stored earlier.  
   ```csharp
   FcvsApiClientCredentials credentials = new FcvsApiClientCredentials() {
									ClientId = options.ClientId,
									ClientSecret = options.ClientSecret,
								};

   //HttpClient requires the URL to end with a slash
   var httpClient = new HttpClient() { BaseAddress = new Uri(options.Url.EnsureEndsWith("/")) };

   FcvsClient client = new FcvsClient(httpClient, credentials);
   ```
   The client will automatically authenticate to the server on the first call. As long as the client is available it will periodically refresh the authentication token.
   
   It is strongly recommended that you create a single instance of the client and reuse it instead of creating a new instance each time.
1. Use the client to make calls to the API.

## Change Log

- 2024-12-6
  - Updated sample project to .NET 8.
  